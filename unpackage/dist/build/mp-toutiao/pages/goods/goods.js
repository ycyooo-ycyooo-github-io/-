(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/goods"],{3657:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;o("5df8");function n(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var i=function(){return o.e("components/icon/icon").then(o.bind(null,"be58"))},s=function(){return o.e("components/numberbox/numberbox").then(o.bind(null,"e58b"))},c=function(){return o.e("components/rate/rate").then(o.bind(null,"1308"))},a=function(){return o.e("wxcomponents/hch-poster/hch-poster").then(o.bind(null,"9911"))},r=function(){return o.e("components/countdown/countdown").then(o.bind(null,"16ed"))},l={onShareAppMessage:function(t){return"button"===t.from&&console.log(t.target),{title:this.goodsData.name,imageUrl:this.swiperList[0].img,path:"pages/goods/goods?gid="+this.goodsData.id,success:function(t){console.log(t)},fail:function(t){console.log(t)}}},components:{tuiNumberbox:s,tuiRate:c,hchPoster:a,tuiIcon:i,tuiCountdown:r},data:function(){return{id:"",secret:"",timestamp:"",beforeHeaderzIndex:11,afterHeaderzIndex:10,beforeHeaderOpacity:1,afterHeaderOpacity:0,swiperList:[{}],currentSwiper:0,anchorlist:[],selectAnchor:0,serviceClass:"",specClass:"",shareClass:"",goodsData:{id:"",name:"",price:"",disPrice:"",number:1,service:[{name:"7天无忧退货",description:"此商品官方保证7天退货"},{name:"满59包邮",description:"此商品享受满59包邮"},{name:"2个工作日退款",description:"此商品享受退货极速退款服务"},{name:"熙美诚品自营",description:"熙美诚品原创生活类品牌，所有商品均为熙美诚品自营，品质保证"}],spec:["XS","S","M","L","XL","XXL"],comment:{number:0,userface:"../../static/img/face.jpg",username:"未上线",content:"商品评论还未上线，敬请期待！"}},selectSpec:null,isKeep:!1,descriptionStr:"",value:1,current:4,xopenid:"",deliveryFlag:!1,canvasFlag:!0,posterData:{},secShow:!1,endTime:0,secPrice:0,nextShow:!1,startTime:0}},onLoad:function(t){this.showBack=!1,this.gid=t.gid},onShow:function(){this.getDetails()},onReady:function(){this.calcAnchor()},onPageScroll:function(t){this.selectAnchor=t.scrollTop>=this.anchorlist[2].top?2:t.scrollTop>=this.anchorlist[1].top?1:0;var e=375;t.scrollTop=t.scrollTop>e?375:t.scrollTop,this.afterHeaderOpacity=t.scrollTop*(1/e),this.beforeHeaderOpacity=1-this.afterHeaderOpacity,this.beforeHeaderzIndex=t.scrollTop>0?10:11,this.afterHeaderzIndex=t.scrollTop>0?11:10},onReachBottom:function(){},mounted:function(){},methods:{getDetails:function(){var t=this,e={id:this.gid};this.$xm.post("/Product/getInfo",e,function(e){var o=e;t.goodsData.id=o.id,t.goodsData.price=o.pro_price,t.goodsData.name=o.pro_name,t.goodsData.disPrice=o.dis_price,t.secPrice=o.sec_price,o.keep?t.isKeep=!0:t.isKeep=!1,o.nextstart?(t.nextShow=!0,t.startTime=parseInt(o.nextstart)-Math.round(new Date/1e3)):t.nextShow=!1,o.etime?(t.secShow=!0,t.endTime=parseInt(o.etime)-Math.round(new Date/1e3)):t.secShow=!1,t.swiperList[0].img="http://ximiphoto.oss-cn-hangzhou.aliyuncs.com/thumb/"+o.pro_sn+".jpg?x-oss-process=style/440",t.descriptionStr='<div style="text-align:center;"><img width="100%" src="http://img.xmvogue.com/detail/'+o.pro_sn+'-.jpg?x-oss-process=style/800"/></div>'})},like:function(){var e=this,o={proid:this.gid};this.$xm.post("/Collect/addcollect",o,function(o){"添加成功!"==o.msg&&(e.isKeep=!0,t.showToast({title:"收藏成功"})),console.log(o)})},dellike:function(){var e,o=this;t.showModal((e={title:"确定取消收藏吗？",content:"",confirmText:"取  消",cancelColor:"#b2b2b2"},n(e,"confirmText","确  定"),n(e,"confirmColor","#2c2c2c"),n(e,"success",function(e){if(e.confirm){var n={id:o.gid};o.$xm.post("/Collect/delcollect",n,function(e){console.log(e),2e3==e.code&&(o.isKeep=!1,t.showToast({title:"删除成功"}))})}}),e))},swiperChange:function(t){this.currentSwiper=t.detail.current},change:function(e){this.value=e.value,console.log(this.secPrice),this.secPrice&&this.value>1&&(this.value=1,t.showToast({title:"秒杀商品限购一件！",icon:"none"})),this.value<1&&(this.value=1,t.showToast({title:"亲，不能再见少了",icon:"none"}))},cart:function(){t.switchTab({url:"../tabBar/cart/cart"})},share:function(){this.shareClass="show"},hideShare:function(){var t=this;this.shareClass="hide",setTimeout(function(){t.shareClass="none"},150)},createCanvasImageEvn:function(){var t=this;this.shareClass="hide",Object.assign(this.posterData,{url:this.swiperList[0].img,title:this.goodsData.name,discountPrice:this.goodsData.disPrice||0,orignPrice:this.goodsData.price,code:"pages/details/details?gid="+this.gid,id:this.gid,close:"../../static/img/close_btn.png"}),this.$forceUpdate(),setTimeout(function(){t.canvasFlag=!1,t.deliveryFlag=!1,t.$refs.hchPoster.createCanvasImage()},500)},canvasCancel:function(t){this.canvasFlag=t,this.getDetails()},joinCart:function(){var e={proid:this.gid,pronum:this.value};this.$xm.post("/Cart/add",e,function(e){var o=e.msg;1==e.s?t.showToast({title:o}):0==e.s&&t.showToast({title:o,icon:"none"})})},buy:function(){this.toConfirmation()},toRatings:function(){t.navigateTo({url:"./ratings/ratings"})},toConfirmation:function(){var e;e=t.getStorageSync("store").store_code?t.getStorageSync("store").store_code:10001,t.navigateTo({url:"../order/confirmation?store="+e+"&proid="+this.gid+"&pronum="+this.value})},showComments:function(t){},setSelectSpec:function(t){this.selectSpec=t},sub:function(){this.goodsData.number<=1||this.goodsData.number--},add:function(){this.goodsData.number++},toAnchor:function(e){this.selectAnchor=e,t.pageScrollTo({scrollTop:this.anchorlist[e].top,duration:200})},calcAnchor:function(){var e=this;this.anchorlist=[{name:"主图",top:0},{name:"评价",top:0},{name:"详情",top:0}];var o=t.createSelectorQuery().select("#comments");o.boundingClientRect(function(o){console.log(o);var n=0,i=t.upx2px(100);e.anchorlist[0].top=o.top-i-n,e.anchorlist[1].top=o.bottom-i-n}).exec()},back:function(){t.navigateBack()},showService:function(){this.serviceClass="show"},hideService:function(){var t=this;this.serviceClass="hide",setTimeout(function(){t.serviceClass="none"},200)},showSpec:function(t){this.specClass="show",this.specCallback=t},specCallback:function(){},hideSpec:function(){var t=this;this.specClass="hide",this.selectSpec&&this.specCallback&&this.specCallback(),this.specCallback=!1,setTimeout(function(){t.specClass="none"},200)},discard:function(){}}};e.default=l}).call(this,o("f266")["default"])},"3a6d":function(t,e,o){"use strict";(function(t){o("e146"),o("921b");n(o("66fd"));var e=n(o("ead2"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("f266")["createPage"])},"49b1":function(t,e,o){"use strict";o.r(e);var n=o("3657"),i=o.n(n);for(var s in n)"default"!==s&&function(t){o.d(e,t,function(){return n[t]})}(s);e["default"]=i.a},"5c24":function(t,e,o){"use strict";var n=o("813c"),i=o.n(n);i.a},"813c":function(t,e,o){},b997:function(t,e,o){"use strict";var n,i=function(){var t=this,e=t.$createElement;t._self._c},s=[];o.d(e,"b",function(){return i}),o.d(e,"c",function(){return s}),o.d(e,"a",function(){return n})},ead2:function(t,e,o){"use strict";o.r(e);var n=o("b997"),i=o("49b1");for(var s in i)"default"!==s&&function(t){o.d(e,t,function(){return i[t]})}(s);o("5c24");var c,a=o("f0c5"),r=Object(a["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],c);e["default"]=r.exports}},[["3a6d","common/runtime","common/vendor"]]]);