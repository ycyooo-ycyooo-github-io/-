(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabBar/user/user"],{"2e21":function(n,t,e){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){return e.e("components/icon/icon").then(e.bind(null,"be58"))},u=function(){return e.e("components/modal/modal").then(e.bind(null,"8214"))},i={components:{tuiIcon:o,tuiModal:u},data:function(){return{userInfo:"",showModal:!0,orderList:[{text:"待付款",icon:"fukuan",id:"0",num:0},{text:"待发货",icon:"fahuo",id:"1",num:0},{text:"待收货",icon:"shouhuo",id:"3",num:0},{text:"已收货",icon:"pingjia",id:"4",num:0},{text:"退款",icon:"tuihuo",id:"8",num:0}],mytoolbarList:[{url:"../../user/address/address",text:"收货地址"},{url:"../../user/keep/keep",text:"我的收藏"},{url:"",text:"团购专享"},{url:"",text:"关于我们"}],count:0,cnum:0}},onLoad:function(){},onShow:function(){var t=this;this.getcount(),this.getCoupon(),n.getStorage({key:"cart",success:function(n){t.count=n.data}}),n.getStorage({key:"userInfo",success:function(n){t.userInfo=n.data,t.userInfo?t.showModal=!1:t.showModal=!0}})},methods:{getuserinfo:function(){var t=this;n.login({success:function(e){if(e.code){e.code;n.getUserInfo({success:function(e){t.userInfo=e.userInfo,t.showModal=!1;var o={encryptedData:e.encryptedData,iv:e.iv};t.$xm.post("/Index/getUnionid",o,function(t){var e=n.getStorageSync("user");e.unionid=t.unionid,n.setStorage({key:"user",data:e,success:function(n){console.log(n)}})}),n.setStorage({key:"userInfo",data:e.userInfo,success:function(n){console.log(n)}})},fail:function(n){}})}}})},toOrderList:function(t){t||(t="s"),console.log(t),n.setStorageSync("tbIndex",t),n.navigateTo({url:"../../user/order_list/order_list?tbIndex="+t})},getcount:function(){var n=this;this.$xm.post("/Mine/index","",function(t){var e=t.order_state,o=e.map(function(n){return n.order_state});o=o.toString().replace(/,/g,""),console.log(o),n.orderList.forEach(function(n){if(-1!==o.indexOf(n.id)){var t=o.indexOf(n.id);console.log(t),n.num=e[t].state}else n.num=0})})},getCoupon:function(){var n=this,t={type:1};this.$xm.post("/Coupon/index",t,function(t){n.cnum=t.data.length})},toCart:function(){n.switchTab({url:"../cart/cart"})},toPage:function(t){console.log(t),t?n.navigateTo({url:t}):n.showToast({title:"此内容正在开发中",icon:"none"})},close:function(){this.showModal=!1}}};t.default=i}).call(this,e("f266")["default"])},3612:function(n,t,e){"use strict";var o,u=function(){var n=this,t=n.$createElement;n._self._c},i=[];e.d(t,"b",function(){return u}),e.d(t,"c",function(){return i}),e.d(t,"a",function(){return o})},"6ba3":function(n,t,e){"use strict";var o=e("a555"),u=e.n(o);u.a},"7e9f":function(n,t,e){"use strict";e.r(t);var o=e("3612"),u=e("d6be");for(var i in u)"default"!==i&&function(n){e.d(t,n,function(){return u[n]})}(i);e("6ba3");var r,c=e("f0c5"),s=Object(c["a"])(u["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);t["default"]=s.exports},"90eb":function(n,t,e){"use strict";(function(n){e("e146"),e("921b");o(e("66fd"));var t=o(e("7e9f"));function o(n){return n&&n.__esModule?n:{default:n}}n(t.default)}).call(this,e("f266")["createPage"])},a555:function(n,t,e){},d6be:function(n,t,e){"use strict";e.r(t);var o=e("2e21"),u=e.n(o);for(var i in o)"default"!==i&&function(n){e.d(t,n,function(){return o[n]})}(i);t["default"]=u.a}},[["90eb","common/runtime","common/vendor"]]]);