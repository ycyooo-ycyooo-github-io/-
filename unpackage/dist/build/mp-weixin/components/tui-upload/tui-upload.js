(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/tui-upload/tui-upload"],{"10ef":function(t,e,i){"use strict";var n=i("8a02"),a=i.n(n);a.a},"23f7":function(t,e,i){"use strict";i.r(e);var n=i("e83a"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e["default"]=a.a},"8a02":function(t,e,i){},cd61:function(t,e,i){"use strict";i.r(e);var n=i("dccf"),a=i("23f7");for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i("10ef");var s,o=i("f0c5"),u=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);e["default"]=u.exports},dccf:function(t,e,i){"use strict";var n,a=function(){var t=this,e=t.$createElement;t._self._c},r=[];i.d(e,"b",function(){return a}),i.d(e,"c",function(){return r}),i.d(e,"a",function(){return n})},e83a:function(t,e,i){"use strict";(function(t){function i(t){return r(t)||a(t)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function r(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={name:"tuiUpload",props:{value:{type:Array,default:function(){return[]}},forbidDel:{type:Boolean,default:!1},forbidAdd:{type:Boolean,default:!1},serverUrl:{type:String,default:""},limit:{type:Number,default:3},fileKeyName:{type:String,default:"file"}},data:function(){return{imageList:[],statusArr:[]}},created:function(){this.imageList=i(this.value);var t=!0,e=!1,n=void 0;try{for(var a,r=this.imageList[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){a.value;this.statusArr.push("1")}}catch(s){e=!0,n=s}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}},computed:{isShowAdd:function(){var t=!0;return(this.forbidAdd||this.limit&&this.imageList.length>=this.limit)&&(t=!1),t}},methods:{reUpLoad:function(t){var e=this;this.$set(this.statusArr,t,"2"),this.change(),this.uploadImage(t,this.imageList[t]).then(function(){e.change()}).catch(function(){e.change()})},change:function(){var t=~this.statusArr.indexOf("2")?2:1;2!=t&&~this.statusArr.indexOf("3")&&(t=3),this.$emit("complete",{status:t,imgArr:this.imageList})},chooseImage:function(){var e=this;t.chooseImage({count:this.limit-this.imageList.length,success:function(i){var n=[];console.log(i);for(var a=0;a<i.tempFilePaths.length;a++){var r=e.imageList.length;if(r>=e.limit){t.showToast({title:"最多可上传".concat(e.limit,"张图片"),icon:"none"});break}var s=i.tempFilePaths[a];n.push(s),e.imageList.push(s),e.statusArr.push("2")}e.change();for(var o=e.imageList.length-n.length,u=0;u<n.length;u++){var l=o+u;e.serverUrl?e.uploadImage(l,n[u]).then(function(){e.change()}).catch(function(){e.change()}):(e.$set(e.statusArr,l,"1"),e.change())}}})},uploadImage:function(e,i){var n=this;return console.log(e,i),new Promise(function(a,r){t.uploadFile({url:n.serverUrl,name:n.fileKeyName,header:{},formData:{},filePath:i,success:function(t){if(console.log(t),200==t.statusCode){var i=JSON.parse(t.data.replace(/\ufeff/g,"")||"{}");if(console.log(i),2e3==i.code){var s=i.data;s="https"+s.slice(4,s.length),console.log(s),s&&(n.imageList[e]=s),n.$set(n.statusArr,e,s?"1":"3")}else n.$set(n.statusArr,e,"3");a(e)}else n.$set(n.statusArr,e,"3"),r(e)},fail:function(t){n.$set(n.statusArr,e,"3"),r(e)}})})},delImage:function(t){this.imageList.splice(t,1),this.statusArr.splice(t,1),this.$emit("remove",{index:t}),this.change()},previewImage:function(e){this.imageList.length&&t.previewImage({current:this.imageList[e],loop:!0,urls:this.imageList})}}};e.default=s}).call(this,i("543d")["default"])}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/tui-upload/tui-upload-create-component',
    {
        'components/tui-upload/tui-upload-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("cd61"))
        })
    },
    [['components/tui-upload/tui-upload-create-component']]
]);
