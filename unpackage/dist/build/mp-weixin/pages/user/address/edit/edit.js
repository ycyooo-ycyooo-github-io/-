(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/address/edit/edit"],{"0b2f":function(t,e,i){"use strict";i.r(e);var n=i("a01e"),o=i("42b3");for(var s in o)"default"!==s&&function(t){i.d(e,t,function(){return o[t]})}(s);i("eda7");var a,c=i("f0c5"),r=Object(c["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);e["default"]=r.exports},"14b4":function(t,e,i){},"42b3":function(t,e,i){"use strict";i.r(e);var n=i("4de0"),o=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);e["default"]=o.a},"4de0":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i("f7d8"),o=new n({key:"LVHBZ-SOY6W-Z5URP-OC34Q-CLWZH-Y6BCX"}),s=function(){return Promise.all([i.e("common/vendor"),i.e("components/mpvue-citypicker/mpvueCityPicker")]).then(i.bind(null,"1785"))},a={components:{mpvueCityPicker:s},data:function(){return{unionid:"",secret:{},editType:"edit",id:"",name:"",tel:"",isDefault:!1,themeColor:"#007AFF",region:["","",""],location:{lat:"",lng:""},address:"",country:""}},onLoad:function(e){var i=this;e&&(this.editType=e.type,"add"==e.type&&(t.setNavigationBarTitle({title:"新增收件人地址"}),t.getLocation({type:"wgs84",success:function(t){i.getCity(t.latitude,t.longitude)},fail:function(t){i.region=["请","选","择"]}})),"edit"==e.type&&(t.setNavigationBarTitle({title:"编辑收件人地址"}),this.id=e.id,this.loadData(e.id))),t.getStorage({key:"user",success:function(t){i.secret=t.data}})},methods:{getCity:function(t,e){var i=this;o.reverseGeocoder({location:{latitude:t,longitude:e},success:function(t){i.region=[t.result.address_component.province,t.result.address_component.city,t.result.address_component.district],i.country="中国",i.address=t.result.address_component.street_number,i.location={lat:t.result.location.lat,lng:t.result.location.lng}}})},loadData:function(t){var e=this,i={id:t};this.$xm.post("/User/getInfo",i,function(t){e.address=t.address,e.isDefault=1==t.default,e.tel=t.phone,e.region=[t.province,t.city,t.town],e.location={lat:t.latitude,lng:t.longitude},e.country=t.country,e.name=t.name,e.id=t.id})},bindRegionChange:function(t){this.region=t.detail.value,this.country="中国",this.location=""},del:function(){var e=this,i={xopenid:this.secret.openid,act:"del",id:this.id,secret:this.secret.secret,timestamp:this.secret.timestamp};t.showModal({title:"删除提示",content:"你将删除这个收货地址",success:function(n){n.confirm?e.$xm.post("/User/ajax",i,function(e){1==e.s?(t.showToast({title:"删除成功",icon:"none"}),t.hideLoading(),t.navigateBack()):t.showToast({title:e.msg,icon:"none"})}):n.cancel&&console.log("用户点击取消")}})},save:function(){var e={xopenid:this.secret.openid,secret:this.secret.secret,timestamp:this.secret.timestamp,unionid:this.secret.unionid,name:this.name,phone:this.tel,country:this.country,default:this.isDefault?1:0,province:this.region?this.region[0]:"",city:this.region?this.region[1]:"",town:this.region?this.region[2]:"",address:this.address,latitude:this.location?this.location.lat:"",longitude:this.location?this.location.lng:""};if("edit"==this.editType&&(e.id=this.id),e.name)if(e.phone){var i=/^[1][3,4,5,7,8][0-9]{9}$/;i.test(e.phone)?0!=this.region.length?e.address?this.getEdit(e):t.showToast({title:"请输入收件人详细地址",icon:"none"}):t.showToast({title:"请选择收件地址",icon:"none"}):t.showToast({title:"请输入正确的手机号码！",icon:"none"})}else t.showToast({title:"请输入收件人电话号码",icon:"none"});else t.showToast({title:"请输入收件人姓名",icon:"none"})},isDefaultChange:function(){this.isDefault=!this.isDefault},getEdit:function(e){"add"==this.editType?this.$xm.post("/User/shipAdd",e,function(e){1==e.s?(t.showToast({title:"提交成功",icon:"none"}),t.hideLoading(),t.navigateBack()):t.showToast({title:e.msg,icon:"none"})}):(e.id=this.id,this.$xm.post("/User/saveAdr",e,function(e){1==e.s?(t.showToast({title:"修改成功",icon:"none"}),t.hideLoading(),t.navigateBack()):t.showToast({title:e.msg,icon:"none"})}))}}};e.default=a}).call(this,i("543d")["default"])},7154:function(t,e,i){"use strict";(function(t){i("e146"),i("921b");n(i("66fd"));var e=n(i("0b2f"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},a01e:function(t,e,i){"use strict";var n,o=function(){var t=this,e=t.$createElement;t._self._c},s=[];i.d(e,"b",function(){return o}),i.d(e,"c",function(){return s}),i.d(e,"a",function(){return n})},eda7:function(t,e,i){"use strict";var n=i("14b4"),o=i.n(n);o.a}},[["7154","common/runtime","common/vendor"]]]);