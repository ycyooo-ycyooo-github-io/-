(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabBar/user/user"],{"4d78":function(t,n,o){"use strict";var e,u=function(){var t=this,n=t.$createElement;t._self._c},c=[];o.d(n,"b",function(){return u}),o.d(n,"c",function(){return c}),o.d(n,"a",function(){return e})},"4d81":function(t,n,o){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=function(){return o.e("components/icon/icon").then(o.bind(null,"1840"))},u=function(){return o.e("components/modal/modal").then(o.bind(null,"8793"))},c={components:{tuiIcon:e,tuiModal:u},data:function(){return{userInfo:"",showModal:!0,totalNum:0,orderList:[{text:"待付款",icon:"fukuan",id:"0",num:0},{text:"待发货",icon:"fahuo",id:"1",num:0},{text:"待收货",icon:"shouhuo",id:"3",num:0},{text:"退款",icon:"tuihuo",id:"8",num:0}],mytoolbarList:[{url:"../../user/address/address",text:"收货地址"},{url:"../../user/keep/keep",text:"我的收藏"},{url:"",text:"团购专享"},{url:"",text:"关于我们"}],count:0,cnum:0}},onLoad:function(){},onShow:function(){var n=this;this.getcount(),this.getCoupon(),t.getStorage({key:"cart",success:function(t){n.count=t.data}}),t.getStorage({key:"userInfo",success:function(t){n.userInfo=t.data,n.userInfo?n.showModal=!1:n.showModal=!0}})},methods:{getuserinfo:function(){var n=this;t.login({success:function(o){if(o.code){o.code;t.getUserInfo({success:function(o){n.userInfo=o.userInfo,n.showModal=!1;var e={encryptedData:o.encryptedData,iv:o.iv};n.$xm.post("/Index/getUnionid",e,function(n){var o=t.getStorageSync("user");o.unionid=n.unionid,t.setStorage({key:"user",data:o,success:function(t){console.log(t)}})}),t.setStorage({key:"userInfo",data:o.userInfo,success:function(t){console.log(t)}})},fail:function(t){}})}}})},toOrderList:function(n){n||(n="s"),console.log(n),t.setStorageSync("tbIndex",n),t.navigateTo({url:"../../user/order_list/order_list?tbIndex="+n})},getcount:function(){var t=this;this.$xm.post("/Mine/index","",function(n){var o=n.order_state,e=o.map(function(t){return t.order_state}),u=0;o.forEach(function(t){u+=Number(t.state)}),t.totalNum=u,e=e.toString().replace(/,/g,""),t.orderList.forEach(function(t){if(-1!==e.indexOf(t.id)){var n=e.indexOf(t.id);t.num=o[n].state}else t.num=0})})},getCoupon:function(){var t=this,n={type:1};this.$xm.post("/Coupon/index",n,function(n){t.cnum=n.data.length})},toCart:function(){t.switchTab({url:"../cart/cart"})},toPage:function(n){console.log(n),n?t.navigateTo({url:n}):t.showToast({title:"此内容正在开发中",icon:"none"})},close:function(){this.showModal=!1}}};n.default=c}).call(this,o("543d")["default"])},"4f34":function(t,n,o){"use strict";o.r(n);var e=o("4d78"),u=o("629f");for(var c in u)"default"!==c&&function(t){o.d(n,t,function(){return u[t]})}(c);o("5cb5");var r,i=o("f0c5"),s=Object(i["a"])(u["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],r);n["default"]=s.exports},"5cb5":function(t,n,o){"use strict";var e=o("b916"),u=o.n(e);u.a},"629f":function(t,n,o){"use strict";o.r(n);var e=o("4d81"),u=o.n(e);for(var c in e)"default"!==c&&function(t){o.d(n,t,function(){return e[t]})}(c);n["default"]=u.a},b916:function(t,n,o){},c4e2:function(t,n,o){"use strict";(function(t){o("a5c7"),o("921b");e(o("66fd"));var n=e(o("4f34"));function e(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,o("543d")["createPage"])}},[["c4e2","common/runtime","common/vendor"]]]);