(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"016d":function(t,e,o){"use strict";var i={modal:()=>o.e("components/modal/modal").then(o.bind(null,"8793"))},n=function(){var t=this,e=t.$createElement,o=(t._self._c,t.__map(t.seckillList,function(e,o){var i=t._f("toFixed")(e.dis_price),n=t._f("toFixed")(e.pro_price);return{$orig:t.__get_orig(e),f0:i,f1:n}})),i=t.__map(t.assembleList,function(e,o){var i=t._f("toFixed")(e.dis_price),n=t._f("toFixed")(e.pro_price);return{$orig:t.__get_orig(e),f2:i,f3:n}});t._isMounted||(t.e0=function(e){t.modalShow=!1},t.e1=function(e){t.modalShow=!1}),t.$mp.data=Object.assign({},{$root:{l0:o,l1:i}})},s=[];o.d(e,"b",function(){return n}),o.d(e,"c",function(){return s}),o.d(e,"a",function(){return i})},"137f":function(t,e,o){"use strict";(function(t){o("a5c7"),o("921b");i(o("66fd"));var e=i(o("b2c8"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},"9d6b":function(t,e,o){},b2c8:function(t,e,o){"use strict";o.r(e);var i=o("016d"),n=o("f9ec");for(var s in n)"default"!==s&&function(t){o.d(e,t,function(){return n[t]})}(s);o("ccea");var a,r=o("f0c5"),c=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],a);e["default"]=c.exports},ccea:function(t,e,o){"use strict";var i=o("9d6b"),n=o.n(i);n.a},f9ec:function(t,e,o){"use strict";o.r(e);var i=o("fd07"),n=o.n(i);for(var s in i)"default"!==s&&function(t){o.d(e,t,function(){return i[t]})}(s);e["default"]=n.a},fd07:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(o("5739")),n=a(o("70d6")),s=o("2e70");function a(t){return t&&t.__esModule?t:{default:t}}var r=function(){return o.e("components/modal/modal").then(o.bind(null,"8793"))},c=function(){return o.e("components/icon/icon").then(o.bind(null,"1840"))},l=function(){return o.e("components/countdown/countdown").then(o.bind(null,"b6bd"))},u={onShareAppMessage:function(t){return{title:"熙美诚品",path:"pages/index/index",success:function(t){console.log(t)},fail:function(t){console.log(t)}}},components:{modal:r,tuiIcon:c,tuiCountdown:l},data:function(){return{scrollTop:0,getheight:"",specialImgHeight:"",storeName:"总部旗舰店",address:"",city:"",id:"",secret:{},showHeader:!0,afterHeaderOpacity:1,headerPosition:"fixed",headerTop:null,statusTop:null,nVueTitle:null,currentSwiper:0,swiperList:[],actionBanner:[],categoryList:[],seckillList:[],bartainlist:[],assembleList:[],imgList:[{img:"../../static/img/01.png",key:"1"},{img:"../../static/img/02.png",key:"2"},{img:"../../static/img/03.gif",key:"3"}],seckillTime:0,bargainList:[],Promotion:[],productList:[],specialList:[],loadingText:"到底了",amapPlugin:null,modalShow:!1,storeItems:[{store_name:"总部旗舰店",desc:"由总部统一发货",store_code:"10001"}],store:"10001",hint:"熙美诚品",popup:{},scrollLeft:0,popHeight:0,addShow:!0,traitList:[],traitListImg:["/static/img/pinpai.png","/static/img/baoyou.png","/static/img/jisu.png"]}},onPageScroll:function(t){this.scrollTop=t.scrollTop,this.headerPosition=t.scrollTop>=0?"fixed":"absolute",this.headerTop=t.scrollTop>=0?null:0,this.statusTop=t.scrollTop>=0?null:-this.statusHeight+"px"},onPullDownRefresh:function(){this.getgoods(),this.getassembleList(),this.getBargin(),setTimeout(function(){t.stopPullDownRefresh()},1e3)},onLoad:function(){this.getbig(),this.getgoods(),this.getassembleList(),this.getLocation(),this.getBargin()},onShow:function(){console.log(t.getStorageSync("store")),t.getStorageSync("store")&&(this.storeName=t.getStorageSync("store").store_name,this.store=t.getStorageSync("store").store_code,this.getgoods())},filters:{toFixed:function(t){return parseFloat(t).toFixed(1)}},methods:{getbig:function(){var t=this,e=(new Date).getTime(),o=n.default.hex_md5("XM#"+n.default.hex_md5(String(e))+"@secret"),i={store:this.store,secret:e,timestamp:o};(0,s.ajax)({url:"/Procate/getBig",method:"post",data:i,success:function(e){t.categoryList=e.data.splice(1,10)}})},getLocation:function(){var e=this;t.getLocation({success:function(t){e.getCity(t.latitude,t.longitude)},fail:function(t){console.log(t)}})},getCity:function(e,o){var n=this,s=new i.default({key:"LVHBZ-SOY6W-Z5URP-OC34Q-CLWZH-Y6BCX"});s.reverseGeocoder({location:{latitude:e,longitude:o},success:function(e){console.log(e),n.city=e.result.ad_info.city;var o=e.result.location.lat,i=e.result.location.lng;n.address=e.result.address,t.setStorageSync("local",e.result.address);var s={city:n.city,from:o+","+i};n.$xm.post("/Index/getStoreList",s,function(e){n.storeItems=e.data,t.setStorageSync("storeList",e.data)})},fail:function(t){console.log(t)},complete:function(t){}})},getassembleList:function(){var t=this;this.$xm.post("/groupbuy/getlist","",function(e){t.assembleList=e.list.splice(0,2),t.assembleList.forEach(function(t){t.pro_sn="http://img.xmvogue.com/thumb/"+t.pro_sn+".jpg?x-oss-process=style/300"})})},getBargin:function(){var t=this;this.$xm.post("/bargain/getlist","",function(e){var o=e.list;o&&o.forEach(function(t){t.pro_img="http://img.xmvogue.com/thumb/"+t.pro_sn+".jpg?x-oss-process=style/300"}),t.bartainlist=o})},toBargain:function(){t.navigateTo({url:"../seckill/bargain/bargain"})},getgoods:function(){var e=this;this.swiperList=[];var o=(new Date).getTime(),i=n.default.hex_md5("XM#"+n.default.hex_md5(String(o))+"@secret"),a={store:this.store,secret:o,timestamp:i};(0,s.ajax)({url:"/Index/getInfo",method:"post",data:a,success:function(o){var i=o.data;e.traitList=i.trait,e.popup=i.popup,e.popHeight=e.popup.height,t.getStorageSync("store")?e.modalShow=!1:""!=i.popup.img?e.modalShow=!0:e.modalShow=!1,e.getheight=i.banner[0].height+"rpx",e.specialImgHeight=i.special.height+"rpx",e.hint=i.hint,t.setNavigationBarTitle({title:e.hint}),e.swiperList=i.banner,e.swiperList.map(function(t){t.img=i._URL_+t.img}),e.actionBanner=i.img,i.faddish.forEach(function(t){t.itemcount=0,t.pro_sn="http://img.xmvogue.com/thumb/"+t.pro_sn+".jpg?x-oss-process=style/300"}),e.Promotion=i.faddish,e.bargainList=i.bargain,e.productList=i.rem,e.bargainList.forEach(function(t){t.itemcount=0,t.pro_sn="http://img.xmvogue.com/thumb/"+t.pro_sn+".jpg?x-oss-process=style/300"}),e.productList.forEach(function(t){t.pro_sn="http://img.xmvogue.com/thumb/"+t.pro_sn+".jpg?x-oss-process=style/300",t.itemcount=0,t.pro_name.length}),i.special.goods&&i.special.goods.map(function(t){t.itemcount=0,t.pro_sn="http://img.xmvogue.com/thumb/"+t.pro_sn+".jpg?x-oss-process=style/300"}),e.specialList=i.special,e.seckillList=i.seckill.next.splice(0,2),e.seckillList.forEach(function(t){t.pro_sn="http://img.xmvogue.com/thumb/"+t.pro_sn+".jpg?x-oss-process=style/300"}),i.seckill.next.length>0&&(e.seckillTime=parseInt(i.seckill.next[0].etime)-Math.round(new Date/1e3))}})},scroll:function(t){this.scrollLeft=t.detail.scrollLeft},toSearch:function(){t.navigateTo({url:"../search/search/search"})},toPet:function(){},toSwiper:function(e){var o=e.src.split("@");switch(o[0]){case"product":t.navigateTo({url:"../goods/goods?gid="+o[1]});break;case"news":t.navigateTo({});break;case"sort":break;case"player":t.navigateTo({url:"plugin-private://wx2b03c6e691cd7370/pages/live-player-plugin?room_id="+o[1]});break;case"open":t.navigateTo({url:"../webViwe/webViwe?url="+o[1]});break;case"cate":t.setStorageSync("cateSelect",o[1]),t.switchTab({url:"../tabBar/category/category"});break;default:}},toPage:function(e){var o=e.url.split("@");switch(console.log(o),o[0]){case"product":t.navigateTo({url:"../goods/goods?gid="+o[1]});break;case"news":break;case"sort":break;case"player":t.navigateTo({url:"plugin-private://wx2b03c6e691cd7370/pages/live-player-plugin?room_id="+o[1]});break;case"open":t.navigateTo({url:"../webViwe/webViwe/webViwe?url="+o[1]});break;case"cate":t.setStorageSync("cateSelect",o[1]),t.switchTab({url:"../tabBar/category/category"});break;default:}},toProduct:function(e){t.navigateTo({url:"../goods/goods-list/product/product?key="+e})},toCategory:function(e){t.setStorageSync("cateSelect",e),t.switchTab({url:"../tabBar/category/category"})},toGoods:function(e){t.navigateTo({url:"../goods/goods?gid="+e.id})},toSeckill:function(){t.navigateTo({url:"../seckill/seckill/seckill"})},toGroup:function(){t.navigateTo({url:"../seckill/group/group"})},swiperChange:function(t){this.currentSwiper=t.detail.current},tobuy:function(t){this.id=t.id,this.joinCart()},joinCart:function(){var e=this,o={proid:this.id,pronum:1};this.$xm.post("/Cart/add",o,function(o){var i=o.msg;1==o.s?(e.addShow=!0,t.showToast({title:i})):0==o.s&&(e.addShow=!1,t.showToast({title:i,icon:"none"})),e.$xm.post("/Cart","",function(e){t.setStorage({key:"cart",data:e.count,success:function(e){t.getStorage({key:"cart",success:function(e){var o=e.data;null!==e.data&&(o=o.toString(),t.setTabBarBadge({index:2,text:o}))}})}})})})},toConfirmation:function(){t.navigateTo({url:"../order/confirmation"})},toStore:function(){t.navigateTo({url:"../store/store/store"})},toactivity:function(){}}};e.default=u}).call(this,o("543d")["default"])}},[["137f","common/runtime","common/vendor"]]]);